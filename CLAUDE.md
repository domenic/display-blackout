# Claude Code Project Guidelines

## Package Version Policy

NEVER trust your own intuition on the latest versions of things, especially packages. ALWAYS search the appropriate package registry to make sure you're adding the latest version, of a non-deprecated package, with the correct name.

## Building and Deploying

This is a WinUI 3 MSIX app. Do NOT use `dotnet build` or `msbuild` directly. Instead, always use:

```sh
pwsh -ExecutionPolicy Bypass -File scripts\deploy.ps1
```

This builds the project, copies the output to the registered package's AppX layout directory (using the `.build.appxrecipe` generated by MSBuild), and re-registers the package. The app will pick up code changes on next launch. Without this script, `dotnet build` alone does not update the installed package.

## Warning Suppression Policy

Do NOT suppress warnings with #pragma or NoWarn. Instead, fix the underlying issue properly. If a warning truly cannot be fixed, discuss with the user first.

## Commit Policy

When in interactive debugging mode with the user, do NOT commit fixes until the user has verified they work. Wait for explicit confirmation before committing.

## PowerShell Execution Policy

Always use `pwsh` (PowerShell 7+), not `powershell` (Windows PowerShell 5.1). The older version uses C# 5 which breaks modern syntax like `out var` in `Add-Type` blocks.

The terminal is often Git Bash, which mangles PowerShell syntax (dollar signs, at-signs, slashes, etc.) when passed inline. For anything beyond a single simple command, write a temporary `.ps1` script file to the scratchpad directory and run it with `pwsh -ExecutionPolicy Bypass -File <path>`.

## Git Staging Policy

ALWAYS carefully review what you're staging before committing. The user may have other unstaged changes from a different session or manual edits. Never use `git add -A` or `git add .` blindly. Instead:

1. Run `git status` to see all modified files
2. Only `git add` the specific files relevant to your current task
3. If a file contains mixed changes (some yours, some not), use `git add -p <file>` to stage only your hunks
4. Verify staged changes with `git diff --staged` before committing
